"use strict";function asyncGeneratorStep(t,n,e,r,o,i,u){try{var a=t[i](u),s=a.value}catch(t){return void e(t)}a.done?n(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(a){return function(){var t=this,u=arguments;return new Promise(function(n,e){var r=a.apply(t,u);function o(t){asyncGeneratorStep(r,n,e,o,i,"next",t)}function i(t){asyncGeneratorStep(r,n,e,o,i,"throw",t)}o(void 0)})}}define(["jquery","core/str"],function(h,f){var n,r,e,g=[];return{init:function(e,t,n,r){var o=this,i=1<arguments.length&&void 0!==t?t:200,u=2<arguments.length&&void 0!==n?n:4,a=3<arguments.length&&void 0!==r?r:6e4,s=["now","month","months","day","days","hour","hours","minute","minutes"].map(function(t){return{key:t,component:"core"}});s.push({key:"strftimedatetime",component:"core_langconfig"});var c=[];f.get_strings(s).then(function(t){t.forEach(function(t){c.push(t)}),Promise.all(c).then(function(t){var n=0;t.forEach(function(t){g[s[n++].key]=t}),setInterval(function(){h(e).each(function(t,n){var e=n.dataset.timestamp,r=n.dataset.endtime;o.get_nice_date(e,i,u,r).then(function(t){h(n).text()!=t&&h(n).fadeOut("slow",function(){h(n).text(t).fadeIn()})})})},a)})})},get_nice_date:(e=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var e,r,o,i,u,a,s,c=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=1<c.length&&void 0!==c[1]?c[1]:200,r=2<c.length&&void 0!==c[2]?c[2]:4,null===(o=3<c.length&&void 0!==c[3]?c[3]:null)&&(o=Date.now()/1e3),u=o-n,new Date,a=new Date(1e3*n),n<o?i="timeago":(i="timetocome",u=-u),s=this.get_nice_duration(u).then(function(t){return{shortduration:t,date:a.toLocaleString()}}),x=u<120?this.get_string("now"):0<=u&&u<3600*r*24&&u<3600*e*24?this.get_string(i,"treasurehunt",s):u<3600*e*24?(s.shortduration=this.get_nice_duration(u,!0,!0),this.get_string(i+"long","treasurehunt",s)):this.get_string("timeat","treasurehunt",s),t.abrupt("return",x);case 11:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)}),get_string:(r=_asyncToGenerator(regeneratorRuntime.mark(function t(n,e,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n in g)return t.abrupt("return",Promise.resolve(g[n]));t.next=2;break;case 2:return t.abrupt("return",r.then(function(t){return f.get_string(n,e,t)}));case 3:case"end":return t.stop()}},t)})),function(t,n,e){return r.apply(this,arguments)}),get_nice_duration:(n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var e,r,o,i,u,a,s,c,h,f=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=2<f.length&&void 0!==f[2]&&f[2],i=!(o=[]),(e=!(1<f.length&&void 0!==f[1])||f[1])&&(u=Math.floor(n/2592e3),n-=2592e3*u),a=Math.floor(n/86400),n-=3600*a*24,s=Math.floor(n/3600),n-=3600*s,c=Math.floor(n/60),h=Math.round(n-60*c),e&&0<u&&(o.push(this.get_string("month"+(1<u?"s":"")).then(function(t){return u+" "+t})),h=c=s=0,r&&(i=!0)),0<a&&!1===i&&(o.push(this.get_string("day"+(1<a?"s":"")).then(function(t){return" "+a+" "+t})),h=c=0,r&&(i=!0)),0<s&&!1===i&&(o.push(this.get_string("hour"+(1<s?"s":"")).then(function(t){return" "+s+" "+t})),h=!1,r&&(i=!0)),0<c&&!1===i&&(o.push(this.get_string("minute"+(1<c?"s":"")).then(function(t){return" "+c+" "+t})),r&&(i=!0)),0<h&&!1===i&&o.push(" "+h+" s."),0===o.length&&o.push("-"),t.abrupt("return",Promise.all(o).then(function(t){return t.join("")}));case 19:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})}});
//# sourceMappingURL=dyndates.min.js.map

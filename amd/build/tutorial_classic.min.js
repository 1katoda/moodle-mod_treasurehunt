"use strict";function asyncGeneratorStep(t,e,o,n,i,r,a){try{var u=t[r](a),s=u.value}catch(t){return void o(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function _asyncToGenerator(u){return function(){var t=this,a=arguments;return new Promise(function(e,o){var n=u.apply(t,a);function i(t){asyncGeneratorStep(n,e,o,i,r,"next",t)}function r(t){asyncGeneratorStep(n,e,o,i,r,"throw",t)}i(void 0)})}}function configureEditIntro(t,e,o){t.setOptions({nextLabel:e[o.indexOf("nextstep")],prevLabel:e[o.indexOf("prevstep")],skipLabel:e[o.indexOf("skiptutorial")],doneLabel:e[o.indexOf("donetutorial")],steps:[{element:"#treasurehunt-editor",intro:e[o.indexOf("welcome_edit_tour")],position:"floating"},{element:"#mapedit",intro:e[o.indexOf("map_tour")],position:"floating"},{element:"#roadlist",intro:e[o.indexOf("roads_tour")],position:"top"},{element:"#stagelistpanel",intro:e[o.indexOf("stages_tour")],position:"right"},{element:"#addroad",intro:e[o.indexOf("addroad_tour")],position:"bottom"},{element:"#addstage",intro:e[o.indexOf("addstage_tour")],position:"bottom"},{element:"#savestage",intro:e[o.indexOf("save_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:e[o.indexOf("editend_tour")],position:"floating"}]}),t.onexit(function(t){document.cookie="introEditProgress = Done"}),t.oncomplete(function(t){document.cookie="introEditProgress = Done"}),t.onchange(function(t){document.cookie="introEditStep = "+t.name,document.cookie="introEditProgress = Done"})}function configurePlayIntro(t,e,o){t.setOptions({nextLabel:e[o.indexOf("nextstep")],prevLabel:e[o.indexOf("prevstep")],skipLabel:e[o.indexOf("skiptutorial")],doneLabel:e[o.indexOf("donetutorial")],steps:[{intro:e[o.indexOf("welcome_play_tour")],position:"floating"},{element:"#collapsibleset",intro:e[o.indexOf("lastsuccessfulstage_tour")],position:"top"},{element:"#mapplay",intro:e[o.indexOf("mapplay_tour")],position:"floating"},{element:"#validatelocation",intro:e[o.indexOf("validatelocation_tour")],position:"top"},{element:"#autolocate",intro:e[o.indexOf("autolocate_tour")],position:"top"},{element:"#treasurehunt-editor",intro:e[o.indexOf("playend_tour")],position:"floating"}]}),t.onexit(function(t){document.cookie="introPlayProgress = Done"}),t.oncomplete(function(t){document.cookie="introPlayProgress = Done"}),t.onchange(function(t){document.cookie="introPlayStep = "+this._currentStep,document.cookie="introPlayProgress = Done"}),t.onafterchange(function(t){for(var e=t.parentElement;null!==e;){if("panel"==e.dataset.role){e.style="z-index: 1001 !important";break}e=e.parentElement}})}define(["jquery","jqueryui","mod_treasurehunt/intro","core/str","core/notification"],function(n,t,i,r,a){return{launchedittutorial:function(){var e=i(),o=["nextstep","prevstep","skiptutorial","donetutorial","welcome_edit_tour","map_tour","mapplay_tour","roads_tour","stages_tour","addroad_tour","addstage_tour","save_tour","editend_tour"],t=o.map(function(t){return{key:t,component:"treasurehunt"}});n(".treasurehunt-editor-loader").show(),r.get_strings(t).done(function(t){n(".treasurehunt-editor-loader").hide(),configureEditIntro(e,t,o),e.start()}).fail(a.exception)},editpage:function(){var o={};n("#edition_maintitle > h2 > a").on("click",this.launchedittutorial),document.cookie.split(";").forEach(function(t){var e=t.split("=");e[1]&&(o[e[0].trim()]=e[1].trim())}),"Done"!=o.introEditProgress&&this.launchedittutorial()},launchplaytutorial:function(){var t=i(),e=["nextstep","prevstep","skiptutorial","donetutorial","welcome_play_tour","lastsuccessfulstage_tour","mapplay_tour","validatelocation_tour","autolocate_tour","playend_tour"],o=e.map(function(t){return{key:t,component:"treasurehunt"}});n.mobile.loading("show"),r.get_strings(o).done(function(o){_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(e<o.length)return t.next=4,o[e];t.next=8;break;case 4:o[e]=t.sent;case 5:e++,t.next=1;break;case 8:case"end":return t.stop()}},t)}))().then(function(){n.mobile.loading("hide"),n("#infopanel").panel("open"),configurePlayIntro(t,o,e),t.start()})}).fail(a.exception)},playpage:function(){var o={};n("#playerhelp").on("click",this.launchplaytutorial),document.cookie.split(";").forEach(function(t){var e=t.split("=");e[1]&&(o[e[0].trim()]=e[1].trim())}),"Done"!=o.introPlayProgress&&this.launchplaytutorial()}}});
//# sourceMappingURL=tutorial_classic.min.js.map

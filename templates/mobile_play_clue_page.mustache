{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_treasurehunt/mobile_view_page

    Template for the mobile view page.

    Classes required for JS:
    -

    Data attributes required for JS:
    -

    Context variables required for this template:
    * cmid
    * courseid
    * treasurehunt
    * options

    Example context (json):
    {
      "cmid": "62",
      "courseid": "3",
      "treasurehunt": {
        "id": "4",
        "course": "3",
        "name": "Group choice activity",
        "intro": "<p>Select your group</p>",
        "introformat": "1",
        "publish": "1",
        "multipleenrollmentspossible": "1",
        "showresults": "3",
        "display": "0",
        "allowupdate": "0",
        "showunanswered": "0",
        "limitanswers": "1",
        "timeopen": "0",
        "timeclose": "0",
        "timemodified": "1528114222",
        "completionsubmit": "0",
        "sortgroupsby": "0",
        "option": {
          "10": "3",
          "11": "4",
          "12": "5"
        },
        "grpmemberid": {
          "6": [
            "3",
            "2"
          ],
        },
        "maxanswers": {
          "12": "1",
          "11": "2",
          "10": "2"
        },
        "open": true,
        "expired": false,
        "alloptionsdisabled": false
      },
      "options": [
        {
          "id": 10,
          "groupid": "3",
          "name": "Group 1",
          "maxanswers": "1",
          "displaylayout": "0",
          "countanswers": 2,
          "checked": false,
          "disabled": true
        },
        {
          "id": 11,
          "groupid": "4",
          "name": "Group 2",
          "maxanswers": "2",
          "displaylayout": "0",
          "countanswers": 1,
          "checked": true,
          "disabled": false
        },
        {
          "id": 12,
          "groupid": "5",
          "name": "Group 3",
          "maxanswers": "2",
          "displaylayout": "0",
          "countanswers": 0,
          "checked": false,
          "disabled": false
        }
      ]
    }
}}

{{=<% %>=}}
<div class="treasurehunt-play-clue-page">

  <ion-card padding class="clue-card">
    <div class="card-title">
      {{gameStatus.lastSuccessfulStage.name}}
      <ion-badge>{{gameStatus.lastSuccessfulStage.position}} / {{gameStatus.lastSuccessfulStage.totalnumber}}</ion-badge>
    </div>
    <ion-card-content>
      <core-format-text  [text]="gameStatus.lastSuccessfulStage.clue"></core-format-text>
    </ion-card-content>
    <ion-row>
      <ion-col text-right>
        <button *ngIf="gameStatus.lastSuccessfulStage.question" icon-start ion-button core-site-plugins-new-content 
          title="{{'plugin.mod_treasurehunt.question' | translate}}" component="mod_treasurehunt" method="mobile_treasurehunt_play_question" 
          [jsData]="{lastSuccessfulStage:gameStatus.lastSuccessfulStage, sendAnswer: sendAnswer}" [preSets]="{getFromCache: 1, saveToCache: 1}">
          <ion-icon name="help-circle"></ion-icon>
          {{'plugin.mod_treasurehunt.question' | translate}}
        </button>
      </ion-col>
    </ion-row>
  </ion-card>

</div>